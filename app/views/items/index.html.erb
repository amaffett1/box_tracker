# encoding: utf-8

<p style="color: green"><%= notice %></p>

<h1>Oggetti</h1>

<% if @box %>
  <div style="margin-bottom: 1em;">
    <!-- ‚úÖ Link corretto per creare un nuovo oggetto dentro la box -->
    <%= link_to "Crea nuovo oggetto", new_box_item_path(@box), class: "btn btn-success" %>
  </div>
<% end %>

<table border="1" cellpadding="6" style="border-collapse: collapse; width: 100%;">
  <thead>
    <tr>
      <th>Codice</th>
      <th>Nome</th>
      <th>Box</th>
      <th>Azioni</th>
    </tr>
  </thead>

  <tbody>
    <% @items.each do |item| %>
      <tr>
        <td><%= item.code %></td>
        <td><%= item.name %></td>
        <td><%= item.box&.name || "-" %></td>
        <td>
          <!-- ‚úÖ Percorsi corretti, annidati nella box -->
          <%= link_to "Mostra", box_item_path(item.box, item), class: "btn btn-sm btn-primary" %> |
          <%= link_to "Modifica", edit_box_item_path(item.box, item), class: "btn btn-sm btn-warning" %> |
          <%= button_to "Elimina", box_item_path(item.box, item),
                method: :delete,
                data: { confirm: "Sei sicuro di voler eliminare questo oggetto?" },
                class: "btn btn-sm btn-danger" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% unless @box %>
  <p style="margin-top: 1em;">
    üîπ Per creare un nuovo oggetto, apri prima una box e clicca su ‚ÄúCrea nuovo oggetto‚Äù.
  </p>
<% end %>
